{% extends "pages/base.html" %}
{% load static %}

{% block banner_buttons %}
<div class="banner-buttons">
   <h2 style="font-size: 3rem; color: rgb(0, 83, 4);">Your Profile</h2>
</div>
{% endblock %}

{% block content %}
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
    }

    .layout-container {
        display: block;
        min-height: 100vh;
        overflow: hidden;
    }

    /* Left Navbar */
    .sidebar {
        width: 200px;
        background-color: #2ecc71;
        padding: 20px 15px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        overflow-y: auto;
    }

    .sidebar h2 {
        color: white;
        margin-bottom: 20px;
        font-weight: bold;
    }

    .sidebar a {
        padding: 12px;
        background: white;
        border-radius: 8px;
        font-weight: bold;
        text-decoration: none;
        color: #2c3e50;
        transition: 0.2s;
    }

    .sidebar a:hover, .active-link {
        background: #27ae60 !important;
        color: white !important;
    }

    /* Right content */
    .content-section {
        margin-left: 210px;
        padding: 40px;
        height: 100vh;
        overflow-y: scroll;
        background-color: #f7f7f7;
    }

    .content-box {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }

    .profile-main img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        background-color: #ccc;
        margin-bottom: 20px;
    }
</style>

<div class="layout-container">

    <!-- Left Sidebar Navigation -->
    <div class="sidebar">
        <h2>Your Profile</h2>
        <a href="#profile" class="nav-button active-link" data-target="profile-content">Personal Profile</a>
        <a href="{% url 'login' %}">Register and Login</a>
        <a href="#" class="nav-button" data-target="support-content">Customer Support</a>
        <a href="#" class="nav-button" data-target="history-content">Purchase History</a>
        <a href="#" class="nav-button" data-target="bookings-content">Your Bookings</a>
        <a href="#" class="nav-button" data-target="security-content">Security & Password</a>
        <a href="{% url 'logout' %}">Logout</a>
    </div>

    <!-- Right Scrollable Content -->
    <div class="content-section">

        <div id="profile-content" class="content-box content-page active">
            <h3>Personal Profile</h3>
            <i class="fas fa-user-circle" style="font-size: 120px; color: #777;"></i>
            <h2>{{ user.first_name }} {{ user.last_name }}</h2>
            <p>{{ user.email }}</p>
            <p>{{ user.profile.phone_number }}</p>
            <p>{{ user.profile.address }}</p>
        </div>

        <div id="support-content" class="content-box content-page hidden">
            <h3>Customer Support</h3>
            <p>Here you can find FAQs or contact information...</p>
        </div>

        <div id="history-content" class="content-box content-page hidden">
            <h3>Purchase History</h3>
            <p>No purchases yet.</p>
        </div>

        <div id="bookings-content" class="content-box content-page hidden">
            <h3>Your Bookings</h3>
            <p>Booking details will appear here.</p>
        </div>

        <div id="security-content" class="content-box content-page hidden">
            <h3>Security & Password</h3>
            <p>Manage your password and security settings.</p>
        </div>

    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const navButtons = document.querySelectorAll('.nav-button');
        const pages = document.querySelectorAll('.content-page');

        navButtons.forEach(btn => {
            btn.addEventListener('click', e => {
                e.preventDefault();

                const target = btn.getAttribute('data-target');

                pages.forEach(p => {
                    p.classList.add('hidden');
                    p.classList.remove('active');
                });

                navButtons.forEach(n => n.classList.remove('active-link'));

                const page = document.getElementById(target);
                if (page) {
                    page.classList.remove('hidden');
                    page.classList.add('active');
                    btn.classList.add('active-link');
                }
            });
        });
    });
</script>

{% endblock %}
